#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;
use WWW::Mechanize ();

my $url = "https://www.google.com/search?q=site:envelopes.envelopes.com";
my $mech = WWW::Mechanize->new(agent => "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36");
$mech->get($url);

#print $mech->content( charset => "utf-8" );
my $nextPage;
my @links;

do {
    push @links, $mech->find_all_links(tag => 'a', url_regex => qr/envelopes\.envelopes\.com\/envelopes\//);

    undef $nextPage;
    $nextPage = $mech->find_link(text_regex => qr/Next/i);
    if(defined $nextPage) {
        sleep(5);
        $mech->follow_link(text_regex => qr/Next/i);
    }
    print "Total links: " . scalar @links . "\n";
} while(defined $nextPage);

foreach (@links) {
    $_->url() =~ /^.*?q=(.*?)(?:&|$)/ || next;
    if(!($1 =~ /webcache/) && !($1 =~ /related/)) {
        print $1 . "\n";
    }
}

if(@links == 0) {
    @links = (
        "http://envelopes.envelopes.com/envelopes/4820",
        "http://envelopes.envelopes.com/envelopes/14x14",
        "http://envelopes.envelopes.com/envelopes/Fuschia",
        "http://envelopes.envelopes.com/envelopes/5x11",
        "http://envelopes.envelopes.com/envelopes/18x12",
        "http://envelopes.envelopes.com/envelopes/Gingham",
        "http://envelopes.envelopes.com/envelopes/15x18",
        "http://envelopes.envelopes.com/envelopes/folders",
        "http://envelopes.envelopes.com/envelopes/Teak",
        "http://envelopes.envelopes.com/envelopes/11x17",
        "http://envelopes.envelopes.com/envelopes/3694",
        "http://envelopes.envelopes.com/envelopes/a7cw",
        "http://envelopes.envelopes.com/envelopes/10x13",
        "http://envelopes.envelopes.com/envelopes/4x10",
        "http://envelopes.envelopes.com/envelopes/5x115",
        "http://envelopes.envelopes.com/envelopes/17x22",
        "http://envelopes.envelopes.com/envelopes/1820wpc",
        "http://envelopes.envelopes.com/envelopes/12x16",
        "http://envelopes.envelopes.com/envelopes/Silver",
        "http://envelopes.envelopes.com/envelopes/3x4",
        "http://envelopes.envelopes.com/envelopes/3X3",
        "http://envelopes.envelopes.com/envelopes/linen",
        "http://envelopes.envelopes.com/envelopes/Cardstock",
        "http://envelopes.envelopes.com/envelopes/7x4x2",
        "http://envelopes.envelopes.com/envelopes/Christmas",
        "http://envelopes.envelopes.com/envelopes/5865",
        "http://envelopes.envelopes.com/envelopes/10x15x2",
        "http://envelopes.envelopes.com/envelopes/Pochette",
        "http://envelopes.envelopes.com/envelopes/9x12x1",
        "http://envelopes.envelopes.com/envelopes/Jobs",
        "http://envelopes.envelopes.com/envelopes/Cca7",
        "http://envelopes.envelopes.com/envelopes/White",
        "http://envelopes.envelopes.com/envelopes/Sunflower",
        "http://envelopes.envelopes.com/envelopes/85X55",
        "http://envelopes.envelopes.com/envelopes/875x115",
        "http://envelopes.envelopes.com/envelopes/512bar103",
        "http://envelopes.envelopes.com/envelopes/fe4580",
        "http://envelopes.envelopes.com/envelopes/10x15",
        "http://envelopes.envelopes.com/envelopes/9x7",
        "http://envelopes.envelopes.com/envelopes/4x3",
        "http://envelopes.envelopes.com/envelopes/13x19",
        "http://envelopes.envelopes.com/envelopes/a1cn",
        "http://envelopes.envelopes.com/envelopes/3x8",
        "http://envelopes.envelopes.com/envelopes/Metallic",
        "http://envelopes.envelopes.com/envelopes/Machinable",
        "http://envelopes.envelopes.com/envelopes/3x5",
        "http://envelopes.envelopes.com/envelopes/12x9",
        "http://envelopes.envelopes.com/envelopes/Luxlining",
        "http://envelopes.envelopes.com/envelopes/Pc0511pl",
        "http://envelopes.envelopes.com/envelopes/13x13",
        "http://envelopes.envelopes.com/envelopes/A6cw",
        "http://envelopes.envelopes.com/envelopes/Orchid",
        "http://envelopes.envelopes.com/envelopes/en6302",
        "http://envelopes.envelopes.com/envelopes/Parchment",
        "http://envelopes.envelopes.com/envelopes/24x30",
        "http://envelopes.envelopes.com/envelopes/Purple",
        "http://envelopes.envelopes.com/envelopes/Aquamarine",
        "http://envelopes.envelopes.com/envelopes/5248",
        "http://envelopes.envelopes.com/envelopes/Inserts",
        "http://envelopes.envelopes.com/envelopes/6x8",
        "http://envelopes.envelopes.com/envelopes/Pique",
        "http://envelopes.envelopes.com/envelopes/14x20",
        "http://envelopes.envelopes.com/envelopes/19x26",
        "http://envelopes.envelopes.com/envelopes/5X6",
        "http://envelopes.envelopes.com/envelopes/amethyst",
        "http://envelopes.envelopes.com/envelopes/11x5",
        "http://envelopes.envelopes.com/envelopes/Mirri",
        "http://envelopes.envelopes.com/envelopes/R2169",
        "http://envelopes.envelopes.com/envelopes/Herculink",
        "http://envelopes.envelopes.com/envelopes/4x9",
        "http://envelopes.envelopes.com/envelopes/11x13",
        "http://envelopes.envelopes.com/envelopes/5x7",
        "http://envelopes.envelopes.com/envelopes/4x11",
        "http://envelopes.envelopes.com/envelopes/13x10",
        "http://envelopes.envelopes.com/envelopes/4bar",
        "http://envelopes.envelopes.com/envelopes/Flap",
        "http://envelopes.envelopes.com/envelopes/4170",
        "http://envelopes.envelopes.com/envelopes/Lux4880113",
        "http://envelopes.envelopes.com/envelopes/2x3",
        "http://envelopes.envelopes.com/envelopes/6x6x6",
        "http://envelopes.envelopes.com/envelopes/7x10",
        "http://envelopes.envelopes.com/envelopes/1cosil",
        "http://envelopes.envelopes.com/envelopes/6x11",
        "http://envelopes.envelopes.com/envelopes/Conformer",
        "http://envelopes.envelopes.com/envelopes/12x12",
        "http://envelopes.envelopes.com/envelopes/r0266",
        "http://envelopes.envelopes.com/envelopes/Petal",
        "http://envelopes.envelopes.com/envelopes/7x4",
        "http://envelopes.envelopes.com/envelopes/a1fw",
        "http://envelopes.envelopes.com/envelopes/Lapis",
        "http://envelopes.envelopes.com/envelopes/5x12",
        "http://envelopes.envelopes.com/envelopes/Notebooks",
        "http://envelopes.envelopes.com/envelopes/En5603",
        "http://envelopes.envelopes.com/envelopes/A1",
        "http://envelopes.envelopes.com/envelopes/1590ps",
        "http://envelopes.envelopes.com/envelopes/Strathmore",
        "http://envelopes.envelopes.com/envelopes/4865",
        "http://envelopes.envelopes.com/envelopes/10x7",
        "http://envelopes.envelopes.com/envelopes/vista",
        "http://envelopes.envelopes.com/envelopes/5X9",
        "http://envelopes.envelopes.com/envelopes/boardwalk",
        "http://envelopes.envelopes.com/envelopes/R255",
        "http://envelopes.envelopes.com/envelopes/6x3",
        "http://envelopes.envelopes.com/envelopes/Labels",
        "http://envelopes.envelopes.com/envelopes/6x12",
        "http://envelopes.envelopes.com/envelopes/5X4",
        "http://envelopes.envelopes.com/envelopes/12x18",
        "http://envelopes.envelopes.com/envelopes/Window",
        "http://envelopes.envelopes.com/envelopes/marblecoat",
        "http://envelopes.envelopes.com/envelopes/A2fw",
        "http://envelopes.envelopes.com/envelopes/pc1123pl",
        "http://envelopes.envelopes.com/envelopes/Notepads",
        "http://envelopes.envelopes.com/envelopes/Seed",
        "http://envelopes.envelopes.com/envelopes/20lb",
        "http://envelopes.envelopes.com/envelopes/7x9",
        "http://envelopes.envelopes.com/envelopes/Political",
        "http://envelopes.envelopes.com/envelopes/6x4",
        "http://envelopes.envelopes.com/envelopes/5020",
        "http://envelopes.envelopes.com/envelopes/Paper",
        "http://envelopes.envelopes.com/envelopes/1004pl",
        "http://envelopes.envelopes.com/envelopes/4x4x4",
        "http://envelopes.envelopes.com/envelopes/Ex4895",
        "http://envelopes.envelopes.com/envelopes/10x13x2",
        "http://envelopes.envelopes.com/envelopes/Ornaments",
        "http://envelopes.envelopes.com/envelopes/Cc66",
        "http://envelopes.envelopes.com/envelopes/8x4",
        "http://envelopes.envelopes.com/envelopes/Vellum",
        "http://envelopes.envelopes.com/envelopes/4x4",
        "http://envelopes.envelopes.com/envelopes/2x4",
        "http://envelopes.envelopes.com/envelopes/5395",
        "http://envelopes.envelopes.com/envelopes/9x12",
        "http://envelopes.envelopes.com/envelopes/6x9",
        "http://envelopes.envelopes.com/envelopes/mirror",
        "http://envelopes.envelopes.com/envelopes/8x8",
        "http://envelopes.envelopes.com/envelopes/3x6",
        "http://envelopes.envelopes.com/envelopes/1590",
        "http://envelopes.envelopes.com/envelopes/Bronze",
        "http://envelopes.envelopes.com/envelopes/Reflective",
        "http://envelopes.envelopes.com/envelopes/2x2",
        "http://envelopes.envelopes.com/envelopes/12x15",
        "http://envelopes.envelopes.com/envelopes/4x2",
        "http://envelopes.envelopes.com/envelopes/Cc10",
        "http://envelopes.envelopes.com/envelopes/2x6",
        "http://envelopes.envelopes.com/envelopes/Corrugated",
        "http://envelopes.envelopes.com/envelopes/4880",
        "http://envelopes.envelopes.com/envelopes/Minblk",
        "http://envelopes.envelopes.com/envelopes/Glassine",
        "http://envelopes.envelopes.com/envelopes/100lb",
        "http://envelopes.envelopes.com/envelopes/Fe4280",
        "http://envelopes.envelopes.com/envelopes/Ungummed",
        "http://envelopes.envelopes.com/envelopes/Flwh4260",
        "http://envelopes.envelopes.com/envelopes/Hotel",
        "http://envelopes.envelopes.com/envelopes/Birch",
        "http://envelopes.envelopes.com/envelopes/9x5",
        "http://envelopes.envelopes.com/envelopes/17x11",
        "http://envelopes.envelopes.com/envelopes/Sparkle",
        "http://envelopes.envelopes.com/envelopes/9x4",
        "http://envelopes.envelopes.com/envelopes/Bank",
        "http://envelopes.envelopes.com/envelopes/40lb",
        "http://envelopes.envelopes.com/envelopes/425X625",
        "http://envelopes.envelopes.com/envelopes/multipack",
        "http://envelopes.envelopes.com/envelopes/Glitter",
        "http://envelopes.envelopes.com/envelopes/taupe",
        "http://envelopes.envelopes.com/envelopes/Mini",
        "http://envelopes.envelopes.com/envelopes/Statefarm",
        "http://envelopes.envelopes.com/envelopes/Savoy",
        "http://envelopes.envelopes.com/envelopes/6x10",
        "http://envelopes.envelopes.com/envelopes/9x6",
        "http://envelopes.envelopes.com/envelopes/512co",
        "http://envelopes.envelopes.com/envelopes/expansion",
        "http://envelopes.envelopes.com/envelopes/8575",
        "http://envelopes.envelopes.com/envelopes/5869",
        "http://envelopes.envelopes.com/envelopes/4147",
        "http://envelopes.envelopes.com/envelopes/4x7",
        "http://envelopes.envelopes.com/envelopes/Copper-Lined",
        "http://envelopes.envelopes.com/envelopes/6x6-Square",
        "http://envelopes.envelopes.com/envelopes/Maroon-A7",
        "http://envelopes.envelopes.com/envelopes/15x20-Envelopes",
        "http://envelopes.envelopes.com/envelopes/5x5-Navy",
        "http://envelopes.envelopes.com/envelopes/Navy-Shimmer",
        "http://envelopes.envelopes.com/envelopes/Teal-4x6",
        "http://envelopes.envelopes.com/envelopes/6x8-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Graduation-Envelopes",
        "http://envelopes.envelopes.com/envelopes/12x15.5",
        "http://envelopes.envelopes.com/envelopes/Envelope-Liners",
        "http://envelopes.envelopes.com/envelopes/5x7-Black",
        "http://envelopes.envelopes.com/envelopes/5x7-White",
        "http://envelopes.envelopes.com/envelopes/5x10-Envelopes",
        "http://envelopes.envelopes.com/envelopes/12.75x15",
        "http://envelopes.envelopes.com/envelopes/5x7-Pocket",
        "http://envelopes.envelopes.com/envelopes/Red-6x9",
        "http://envelopes.envelopes.com/envelopes/Yellow-5x7",
        "http://envelopes.envelopes.com/envelopes/3x6.25",
        "http://envelopes.envelopes.com/envelopes/55x55-Envelopes",
        "http://envelopes.envelopes.com/envelopes/5x11.5",
        "http://envelopes.envelopes.com/envelopes/9x12-Tyvek",
        "http://envelopes.envelopes.com/envelopes/3.75x7",
        "http://envelopes.envelopes.com/envelopes/A-75",
        "http://envelopes.envelopes.com/envelopes/Seafoam-6x9",
        "http://envelopes.envelopes.com/envelopes/Gold-4x6",
        "http://envelopes.envelopes.com/envelopes/Tithe-Envelopes",
        "http://envelopes.envelopes.com/envelopes/6x10.5",
        "http://envelopes.envelopes.com/envelopes/6x8.25",
        "http://envelopes.envelopes.com/envelopes/Cellophane-Envelopes",
        "http://envelopes.envelopes.com/envelopes/10x15-Envelopes",
        "http://envelopes.envelopes.com/envelopes/6x9-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Gold-Border",
        "http://envelopes.envelopes.com/envelopes/Navy-Metallic",
        "http://envelopes.envelopes.com/envelopes/5x5-Vellum",
        "http://envelopes.envelopes.com/envelopes/5x7-Vellum",
        "http://envelopes.envelopes.com/envelopes/4x6-Envelopes",
        "http://envelopes.envelopes.com/envelopes/6x4.25",
        "http://envelopes.envelopes.com/envelopes/3x4-Envelope",
        "http://envelopes.envelopes.com/envelopes/4x8-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Pochette-Envelopes",
        "http://envelopes.envelopes.com/envelopes/A4-Silver",
        "http://envelopes.envelopes.com/envelopes/Gold-Mini",
        "http://envelopes.envelopes.com/envelopes/9x12-Vellum",
        "http://envelopes.envelopes.com/envelopes/Ivory-Parchment",
        "http://envelopes.envelopes.com/envelopes/Red-Mailer",
        "http://envelopes.envelopes.com/envelopes/Parking-Ticket",
        "http://envelopes.envelopes.com/envelopes/A9-Ivory",
        "http://envelopes.envelopes.com/envelopes/A2-Pastel",
        "http://envelopes.envelopes.com/envelopes/Silver-Lining",
        "http://envelopes.envelopes.com/envelopes/10.5x6",
        "http://envelopes.envelopes.com/envelopes/Passport-Envelopes",
        "http://envelopes.envelopes.com/envelopes/3x4.5",
        "http://envelopes.envelopes.com/envelopes/4.5x3",
        "http://envelopes.envelopes.com/envelopes/black-liner",
        "http://envelopes.envelopes.com/envelopes/A8-Ivory",
        "http://envelopes.envelopes.com/envelopes/A7-Pocket",
        "http://envelopes.envelopes.com/envelopes/7x7-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Tip-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Vellum-Pochette",
        "http://envelopes.envelopes.com/envelopes/4.5x6",
        "http://envelopes.envelopes.com/envelopes/6-Remittance",
        "http://envelopes.envelopes.com/envelopes/9x12-Purple",
        "http://envelopes.envelopes.com/envelopes/Purple-6x9",
        "http://envelopes.envelopes.com/envelopes/Navy-Pocket",
        "http://envelopes.envelopes.com/envelopes/Side-Flap",
        "http://envelopes.envelopes.com/envelopes/Green-9x12",
        "http://envelopes.envelopes.com/envelopes/Brown-Envelopes",
        "http://envelopes.envelopes.com/envelopes/A2-Navy",
        "http://envelopes.envelopes.com/envelopes/9x9-Envelope",
        "http://envelopes.envelopes.com/envelopes/7x7-Square",
        "http://envelopes.envelopes.com/envelopes/95x95-Envelopes",
        "http://envelopes.envelopes.com/envelopes/3.5x6",
        "http://envelopes.envelopes.com/envelopes/Translucent-Vellum",
        "http://envelopes.envelopes.com/envelopes/Navy-Flap",
        "http://envelopes.envelopes.com/envelopes/5x5-Red",
        "http://envelopes.envelopes.com/envelopes/Goldenrod-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Bank-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Gray-6x9",
        "http://envelopes.envelopes.com/envelopes/9x11.5",
        "http://envelopes.envelopes.com/envelopes/A7-Yellow",
        "http://envelopes.envelopes.com/envelopes/4x5-Envelopes",
        "http://envelopes.envelopes.com/envelopes/5.5x8",
        "http://envelopes.envelopes.com/envelopes/Ivory-9x12",
        "http://envelopes.envelopes.com/envelopes/Fa5060-01",
        "http://envelopes.envelopes.com/envelopes/9x9-Clear",
        "http://envelopes.envelopes.com/envelopes/6x9-Clasp",
        "http://envelopes.envelopes.com/envelopes/Smallest-Envelope",
        "http://envelopes.envelopes.com/envelopes/15.5x12",
        "http://envelopes.envelopes.com/envelopes/7.5x5",
        "http://envelopes.envelopes.com/envelopes/Mini-Black",
        "http://envelopes.envelopes.com/envelopes/11x4.75",
        "http://envelopes.envelopes.com/envelopes/4x6-Vellum",
        "http://envelopes.envelopes.com/envelopes/A7-Seafoam",
        "http://envelopes.envelopes.com/envelopes/Fundraising-Envelope",
        "http://envelopes.envelopes.com/envelopes/Mini-Purple",
        "http://envelopes.envelopes.com/envelopes/See-Through",
        "http://envelopes.envelopes.com/envelopes/6.25x3",
        "http://envelopes.envelopes.com/envelopes/Glossy-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Savoy-A7",
        "http://envelopes.envelopes.com/envelopes/6x11.5",
        "http://envelopes.envelopes.com/envelopes/11.5x6",
        "http://envelopes.envelopes.com/envelopes/6x9-Glassine",
        "http://envelopes.envelopes.com/envelopes/A10-Orange",
        "http://envelopes.envelopes.com/envelopes/11.5x5",
        "http://envelopes.envelopes.com/envelopes/A9-Vellum",
        "http://envelopes.envelopes.com/envelopes/Linen-9x12",
        "http://envelopes.envelopes.com/envelopes/Payroll-Envelopes",
        "http://envelopes.envelopes.com/envelopes/2x3.5",
        "http://envelopes.envelopes.com/envelopes/Glassine-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Seafoam-A7",
        "http://envelopes.envelopes.com/envelopes/maroon-envelopes",
        "http://envelopes.envelopes.com/envelopes/55x85-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Glassine-A7",
        "http://envelopes.envelopes.com/envelopes/Garnet-Envelopes",
        "http://envelopes.envelopes.com/envelopes/Vellum-Card",
        "http://envelopes.envelopes.com/envelopes/5x4-Envelopes",
        "http://envelopes.envelopes.com/envelopes/A7-Navy",
        "http://envelopes.envelopes.com/envelopes/4x4-Envelopes",
        "http://envelopes.envelopes.com/envelopes/9.5x6",
        "http://envelopes.envelopes.com/envelopes/Ivory-A1"
    );
}