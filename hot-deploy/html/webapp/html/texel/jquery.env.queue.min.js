function AjaxQueue(a,b,c){this.honorLast=a,this.maxAttempts=b,this.async=c,this.queue=[];var d=0,e=-1,f=-1;this.getArrayPosition=function(){return d},this.setNextArrayPosition=function(){d++},this.getSuccessIndex=function(){return e},this.setSuccessIndex=function(a){e=a},this.getFailIndex=function(){return f},this.setFailIndex=function(a){f=a}}function AjaxCall(){this.index=0,this.queue=0,this.state=-1,this.ajax=null,this.attempts=1}AjaxQueue.prototype={push:function(a,b,c,d){a.async=this.async;var e=new AjaxCall;e.index=this.getArrayPosition(),e.start(a,b,c,d,this),this.queue[this.getArrayPosition()]=e,this.setNextArrayPosition()},abort:function(a){if("undefined"==typeof a||null==a)for(var b=0;b<this.getSuccessIndex();b++){var c=this.queue[b];0==c.ajax.state&&c.ajax.abort()}else{var c=this.queue[a];0==c.state&&c.ajax.abort()}},abortCheck:function(){this.honorLast&&this.abort(null)}},AjaxCall.prototype={start:function(a,b,c,d,e){var f=this;f.state=0,f.ajax=$.ajax(a).done(function(a,c,d){f.state=1,f.done(a,c,d,b,e)}).fail(function(g){f.state=2,f.retry(g,a,b,c,d,e)}).always(function(a,b,c){"function"==typeof d&&d(a,b,c)})},retry:function(a,b,c,d,e,f){f.maxAttempts>1&&this.attempts<f.maxAttempts&&(!f.honorLast||f.honorLast&&f.getSuccessIndex()<this.index)?(this.attempts++,this.start(b,c,d,e,f)):(this.fail(f),"function"==typeof d&&d(a))},done:function(a,b,c,d,e){(!e.honorLast||e.honorLast&&e.getSuccessIndex()<this.index)&&(e.setSuccessIndex(this.index),e.abortCheck(),"function"==typeof d&&d(a,b,c))},fail:function(a){a.setFailIndex(this.index)}};